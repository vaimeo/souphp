<?php
 /*
Please wajid
 
                                 .,::::r;rSXX52r;:,,:;:,.. ......                                   .,      
                                    ...: ..:; .S;Sr,...:::.                                         ,       
                                       .,:,.., s9BA&i,...,,. ...::,      ,:;rsssiiisir;:           ;.       
                                           :s2ssXh35.,;XGAs.  .;;;::,,,;53X3h99992ShHS2HAs;:.     r.        
                                              ,rS9i  ;@@@@@@5.,;;;.,rsXHHAHhABAHHG9#MXh#@#MA5;   r,  .      
                                                 :. ,@@##BAAG;:s:::.,G@#B#@@@@@@@@#@BBMHBHAH#M9sr,          
                                                    .r22:  ,s;S; ,r ;@@##@@MA@@@@@@###Hh9hhGG&A&2           
                                                           ;rS2,..:;B@@#AS: .;X2iXA###MMHAAHBMMBBS          
                                                            ., ,, ,rB@Ar,         .r2A###BBBMAHM@B,         
      ..                                                          .,&r  .....      .r3HMBBMAM####Bh         
                                                                   :   ...,,,,,,..  ,rh@@@@@#M@@MBA  ,. ..  
                                                                   ::5Sr;,........    .rGM@@@##MBMA   .     
                                                       ,.     ..   #@B .:r;:,..,.,,,.    .;9@@@@M#A         
                                               ;,    .      ... ,.S@@.  i@i&sAXS;::5s;::    :H@@#@X         
                                               ;. , ..  ., ...... ,rs   .;SrsSr@S.r;  3Hr    ;@@@@.         
                                                  .     ....... ,..r522Xr,. ,3 . ss. X@H#3.. s@#@;          
              ::s:. ,                                 .., ,,.    rM@@@#h,    X9is@MHMBA&GAr,;@@@r           
            ..;#@@9Xi.:;,                                  .. .   ,;rr:    ..:M@@@@@#A99&2::AM3r            
              ;Gs#r;sGX#;.r;:                           ....     .           ,:iA@@@@#MB2. .&. rX           
                   .#r@2 r5#s:r3                       ...   ... :,.:;S;:ris::.  .r9HA5:  ,hX5.s;           
                       .rHAr 5&3rii;.                ...... ...  ;:G@#@@@@@#S.          ,;29 ;r:            
                 ;.    2A:  25..#Mi#2             .............  ,;BGss2X23B&s:.,...,,:;s5s .,;             
             . 2#9rs...        ,3rrs.             ........ .....  s:.,,:;;rX@@@S:;;rrriS5hs ..     ..       
              sG5; :GA                             ............. .G::i&Xr;;r;iAr;iSisS23s2@:    ..,.        
              .  srA#2.;:                          .,........ .. .hi:,3#Xsr;,;i:;ri23X&Sr@@s     .,,      . 
                    .:2A@r9r.                      ..,.......   . s@3;:...,;XM&5i5hM#H5s@M;r,       ...  .. 
                         :2hB.                     .,,.....,:rri2sr@@#HA####@@@@@@@#3ri#G;rSr       .   ..  
                            .               .      .:,.,.,;i2h93hB@@@9X@@@@@@@@@@B2;:SHXsssir,  .      ..   
                                                   .,,,:r23XGhAH#@@@#,:rSX3XXXXSs;:r9&iisisriS:,      ..    
                                           .        ,,;sXhA#3AHB##@r ,riiisrr;;::;SHGiSiS5ssss55;    .,     
. ..                                     .         ..;5;XA#A92;,:5r ;@rsr;;rr;;r2AGS529X5ssSss253r.  ,      
. .........                                        .XHGABSSA3, .r  H@2iisrsiii29G322X2XSss5i;iXSi55:.       
. .............                                    .@#2@3X95,.::  GB;si2h3XXX9Gh2522Siss232rS3ii55SXr       
. ...........,,,,...                               r@G#A&&s,.:,  3#,:r;;5322GhX25SsssriX2s;hhr;sirrS2r      
. .............,,,,,,....                         :@MGM9sr,,;.  s@A;,:,,:,.r2XisSis5Si2s;;BBXsrsXs;:;i2:    
,.,..,,.............,,,,,,,..                .  ;i@Br3i .,:r   2@@@@s;S2HXr:,;riSiS2S5i;:9BXS552B#BASr;r;.  
..,,...,................,,,::,,...            ,B@@@is3 .;;;   ,@@@@i5#@@@@@@X. ;r2XXSX2ssA2XGh9hh9XhhAS;rs; 
. .,,...,...,...............,,:::,,,,.     .  2@@G3iX: ;;;   .@@@S:X@#BH#@@@@@s..i2;rsrSA&AAA&355Xh925A5:;s:
. .......,,..,,...............,,,,,:;;:,. .. r@##32r: ;rr    H@@;:22222B@@##@@@@2ihH@@M##MM&5S52X2Sr;;i32h9s
.   .......,,.,:,.........,,....,,,,::;;:,.. ;@#h2;:.;ii,    @@r;55iS3AB&&HM##H#@##@M##@@#9srr;rissiisiSSsss
.    ..   ..,,..,:,..,,.....,.,,,,,,,,:;;;:,,r2&3;,,.;2s     #2:SsS29ABhXGAAXiri52hAM#@#MS:ir::rSh&ii5Sssisr
.    .       ..,,,::,.,,:,..,,,,,,,...,:;:,i5r;S;:;.sA9   , ,r;sX2XXABhh&92isS2SS9AH##HXS  r;rS23hisiiiSX5;;
:   :2G2@As,   ...,,::,,,::,.,,,,,:...,.::,&#A2:;i::3h,   . ,iir5hGABG3AAX5Si555AHHMHXir,.s;s2&A9rrs5X9Sr;rr
:. ;;rX@@@@@@Gr,:,,,,,::,,:::,,,,,,;:..;&AG@@@B:SS;h&i     .22i9A9&9X39GGSriir:rS3BS...,:;.;HHH9SS2233irrrrr
33rrr;;s5A@@@@h.:::;;::::,,,::,,,,,,:,;2&H#@@MAS&r3hH.     :SX3AhAA9Gh2X3srs2,,,::,..,... .3H&XS5hAH2rrsrsrr
2rr;r;.    ;2s,:;rrrssssrr;;::,,,,.:i::A#MH@#&#HsX9M2  ,,,:: ir :sr;5i,;;,:;r:,Xs.:;......rAG2i23A3Sssrsiiir
HAG2Sssrrrsrrrrrrr;;;;;;;;;;;;;::,.;BAi5AHMM&hH2iG9G,  . .::,:..;;r;;,:;:,,::iiSr:,..,..,:S3XXX3X2233Sisiiii

*/



require_once("include/htmlConfig/configure_html.php");

class generate_data extends configure_html 
{
	public $action;
	public $table_name;
	public $table_id;
	public $conditionalClaueses;
	
	
	function touch_html($table_index)
	{
		$this->table_name=$this->getTableName($table_index);
		$sql="select * from $this->table_name $this->conditionalClaueses";
		$result=$this->run_db($sql);
	
		
		$this->set_html();
		$html=$this->_view_html_master;
		$html=$html.$this->_view_html_master_head;
		
		$html=$html.$this->_view_html_master_tag1;
		
		
		$field_heading_array=array();
		
		if(in_array("checkbox",$this->action))
					{
						$html=$html.$this->_view_html_master_tag3_3."Sn".$this->_view_html_master_tag3_4;
						$html=$html.$this->_view_html_master_tag3_3.str_replace("fucnction()","alert('call')",$this->_view_html_master_tag3_1).$this->_view_html_master_tag3_4;
					}
		
		foreach($this->_column_sequence as $tn=>$datatype)
				{
					
					
					$texthead=mysql_field_name($result,$tn); 
					
					$e=0;
					if($this->_column_foregn_key_index!="")
					{
						foreach($this->_column_foregn_key_index as $fkeyindex)
						{
							if($fkeyindex[0]==$tn)
							{
								$field_heading_array[$e]=$texthead;
							}
							$e++;
						}
						
					}
					
					$texthead=str_replace("_"," ",$texthead);
					$texthead=str_replace("id","",$texthead);
					
					$html=$html.$this->_view_html_master_tag2.$texthead.$this->_view_html_master_tag3;
					
							
				}
			
			
		
			if($this->action)
			{
				$html=$html.$this->_view_html_master_tag2."Action".$this->_view_html_master_tag3;
			}
		$html=$html.$this->_view_html_master_tag4;
		$html=$html.$this->_view_html_master_foot;
		
		if($this->number_of_record($result)>0)
		{
	
		$html=$html.$this->view_html_child_head;
		$r=0;
		while($this->row=$this->get_array($result))
			{
				$c++;
				$r++;
				$html=$html.$this->_view_html_child_tag1;
				
				if(in_array("checkbox",$this->action))
					{
						$html=$html.$this->_view_html_child_tag2.$r.$this->_view_html_child_tag3;
						$html=$html.$this->_view_html_child_tag2.$this->_view_html_master_tag3_2."'$r'\" />".$this->_view_html_child_tag3;
					}
					
					
				foreach($this->_column_sequence as $tn=>$datatype)
				{
					
						if($datatype=="picture")
						{	
								$ppc=0;	
						foreach($this->_column_sequence_picture_prams[$tn] as $picprams)
						{
							
							if($ppc==0)
							{
								 $src=" src='$picprams".$this->row[$tn]."'";
								 $alt=" alt='$picprams".$this->row[$tn]."'";
							}
							
							if($ppc==1)
							{
								 $width=" width='$picprams'";
							}
							
							
							if($ppc==2)
							{
								 $height=" height='$picprams'";
							}
							
							$ppc++;
							
						}
							
							$text="<img ".$src.$alt.$width.$height." >";
						}
						else
						{
							$text=$this->row[$tn];
						}
						
						
					$fe=0;
					if($this->_column_foregn_key_index!="")
					{
						foreach($this->_column_foregn_key_index as $fkeyindex1)
						{
							
							
							if($fkeyindex1[0]==$datatype)
							{
								/*$text=;*/
								$text=$this->get_field_value($field_heading_array,$text,$fkeyindex1[1],$field_heading_array[$fe]);
							}
							$fe++;
						}
					}
					
				
					$html=$html.$this->_view_html_child_tag2.$text.$this->_view_html_child_tag3;
				}
				
				
				
				
				if($this->allow_action)
				{
					$a="";
					
								
					
					foreach($this->edit_column_sequence as $c)
					{
							$array_va11=mysql_field_name($result, $c);
							 $array_va12=$this->row[$c];
							
									
							
							if($c==0)
							{
								$var2=str_replace(' ','&nbsp;',$array_va12);
								$var2=str_replace('','&nbsp;',$var2);
								$a .="Array('$array_va11','$var2')";
							}
							else
							{
								$var=str_replace(' ','&nbsp;',$array_va12);
								$var=str_replace('','&nbsp;',$var);
								$a .=",Array('$array_va11','$var')";
							}
							
				
					}
					
						$html=$html.$this->_view_html_master_tag2;
						
						$a=str_replace("),)","))",$a);
						
					if(in_array("edit",$this->action))
					{
						$html=$html.str_replace("href=''","href='#' onClick=getarray(Array($a))",$this->_view_html_master_tag2_1)."Edit".$this->_view_html_master_tag2_2;
					}
					
					if(in_array("remove",$this->action))
					{
						$html=$html."&nbsp;".str_replace("href=''","href='#' onclick=confirm_Remove('".$this->page_url."&remove=".$this->row[0]."')",$this->_view_html_master_tag2_1)."Remove".$this->_view_html_master_tag2_2;
					}
					
					

					$html=$html.$this->_view_html_master_tag3;
				}
				$html=$html.$this->_view_html_child_tag4;
			}
			
			
				
		
		
		$html=$html.$this->view_html_child_foot;
	
		
		
		}
		$html=$html.$this->_view_html_foot;
		echo  $html;
		
		
		
	}
	
	
	

	
function edit($table_index,$csarray)
	{
		$this->table_name=$this->getTableName($table_index);
		$this->edit_column_sequence=$csarray;
		$sql="select * from $this->table_name $this->conditionalClaueses";
		$result=$this->run_db($sql);
	
		
		if($this->number_of_record($result)>0)
		{
	
		$field_heading_array=array();
		//$this->edit_column_sequence=array("0","2","1","3");

		foreach($this->edit_column_sequence as $tn)
				{
					$texthead=mysql_field_name($result, $tn); 
					$e=0;
					if($this->_column_foregn_key_index!="")
					{
						foreach($this->_column_foregn_key_index as $fkeyindex)
						{
							if($fkeyindex[0]==$tn)
							{
								$field_heading_array[$e]=$texthead;
							}
							$e++;
						}
						
					}
			$r=0;
			while($this->row=$this->get_array($result))
			{
					$fe=0;
				foreach($this->edit_column_sequence as $tn)
				{
					$text=$this->row[$tn];
					
					$fe=0;
					if($this->_column_foregn_key_index!="")
					{
						foreach($this->_column_foregn_key_index as $fkeyindex1)
						{
							if($fkeyindex1[0]==$tn)
							{
								$text=$this->get_field_value($field_heading_array,$text,$fkeyindex1[1],$field_heading_array[$fe]);
							}
							$fe++;
						}
					}
					
				
				}
				
				
							
					
					$fv= array();
					foreach($this->edit_column_sequence as $c)
					{
							$array_va11=mysql_field_name($result, $c);
							 $array_va12=$this->row[$c];
							
								$var2=str_replace(' ',' ',$array_va12);
								$var2=str_replace('','',$var2);
								$fv[$array_va11]=$var2;
				
					}
				
					
				    
                            return $fv;		
							
					

				}
			
			
		}
			
		
	}
	
	}
    
	
	
}


?>